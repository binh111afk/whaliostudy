<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Whalio - Dashboard</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#7c3aed">
    <meta name="description" content="A comprehensive student dashboard for managing courses, exams, flashcards, and study time">
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icon (iOS Support) -->
    <link rel="apple-touch-icon" href="img/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Whalio">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="home.css">
    <link rel="stylesheet" href="community.css">
</head>

<body>

    <header>
        <div class="nav-left">
            <button class="menu-toggle" onclick="toggleMobileMenu()">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
            <a href="#" class="nav-logo" onclick="showDashboard()">
                <img src="./img/logo.png" alt="Logo Whalio">
            </a>
            <div class="nav-search">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <input type="text" placeholder="T√¨m ki·∫øm">
            </div>
        </div>

        <nav class="nav-center">
            <a href="#" id="nav-home" class="nav-item active" data-tooltip="Trang ch·ªß" onclick="showDashboard()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                    </path>
                </svg>
            </a>
            <a href="#" class="nav-item" data-tooltip="T√≠nh GPA">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5z" />
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
                </svg>
            </a>
            <a href="#" id="nav-docs" class="nav-item" data-tooltip="T√†i li·ªáu"
                onclick="PageManager.showLibraryPage(this)">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
                    </path>
                </svg>
            </a>
            <a href="#" class="nav-item" data-tooltip="C·ªông ƒë·ªìng" onclick="PageManager.showCommunityPage(this)">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z">
                    </path>
                </svg>
            </a>
        </nav>
        <div class="nav-right">

            <div id="guest-actions">
                <button class="btn-login-nav" onclick="openLoginModal()">
                    ƒêƒÉng nh·∫≠p
                </button>
            </div>

            <div id="user-actions" style="display: none; align-items: center; gap: 20px;">

                <button class="btn-quick-upload" onclick="openUploadDocModal()">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                    </svg>
                    <span>T·∫£i l√™n</span>
                </button>
                <input type="file" id="file-input" style="display: none;">

                <div class="nav-divider"></div>

                <button class="nav-icon-btn" title="Th√¥ng b√°o" style="position: relative;">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                        </path>
                    </svg>
                    <span class="noti-dot"></span>
                </button>

                <div class="user-menu-container">
                    <div class="nav-avatar" onclick="toggleUserMenu()" style="cursor: pointer;">H</div>

                    <div class="dropdown-menu" id="userDropdown">
                        <div class="dropdown-info"
                            style="padding: 8px 16px; border-bottom: 1px solid #eee; margin-bottom: 5px;">
                            <span id="menuUserName"
                                style="font-weight: bold; font-size: 14px; color: #374151;">User</span>
                        </div>

                        <a href="#" class="dropdown-item" onclick="showProfilePage()">H·ªì s∆° c√° nh√¢n</a>
                        <a href="#" class="dropdown-item">C√†i ƒë·∫∑t</a>
                        <a href="#" class="dropdown-item" onclick="ModalManager.open('dataSettings')">üíæ Sao l∆∞u & Kh√¥i ph·ª•c</a>

                        <a href="#" onclick="handleLogout()" class="dropdown-item item-logout">ƒêƒÉng xu·∫•t</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">

        <aside class="sidebar-left">
            <div class="user-mini-profile">
                <div class="avatar">H</div>
                <div class="user-name">Tr·ªãnh Quang<br>Huy</div>
            </div>
            <nav class="nav-menu">
                <!-- Menu ƒë·∫ßu ti√™n: Dashboard/Trang ch·ªß -->
                <a href="#" onclick="showDashboard()" class="active">
                    <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    Trang ch·ªß
                </a>

                <!-- Menu Kho t√†i li·ªáu -->
                <a href="#" onclick="showDocumentsPage(this)">
                    <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path
                            d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
                        </path>
                    </svg>
                    Kho t√†i li·ªáu
                </a>

                <!-- Menu T√†i li·ªáu ƒë√£ l∆∞u -->
                <a href="#" onclick="showSavedDocumentsPage(this)">
                    <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                    </svg>
                    T√†i li·ªáu ƒë√£ l∆∞u
                </a>
                <a href="#" onclick="ExamCreator.switchToExamsTab()">
                    <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path
                            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2">
                        </path>
                    </svg>
                    Thi online
                </a>
                <a href="#" onclick="showStudyTimePage(this)">
                    <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Studytime
                </a>
                <a href="#" onclick="PageManager.showTimetablePage(this)">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
                    </svg>
                    Th·ªùi kh√≥a bi·ªÉu
                </a>
            </nav>
            <div class="social-links">
                <a href="#" class="social-link">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg"
                        alt="fb">
                    Facebook Quang B√¨nh
                </a>
                <a href="#" class="social-link">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg"
                        alt="yt">
                    Ch·∫øt v√¨ To√°n
                </a>
            </div>
        </aside>

        <main id="main-dashboard">
            <section class="welcome-card">
                <div class="welcome-info">
                    <h1>Xin ch√†o, Tr·ªãnh Quang Huy!</h1>
                    <p>H√¥m nay l√† Th·ª© NƒÉm, ng√†y 15/01/2026</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-item stat-streak">
                        <span class="stat-label">Streak</span>
                        <span class="stat-num">0N</span>
                    </div>

                    <div class="stat-item stat-study">
                        <span class="stat-label">Gi·ªù h·ªçc</span>
                        <span class="stat-num">0H</span>
                    </div>

                    <div class="stat-item stat-relax">
                        <span class="stat-label">Gi·∫£i tr√≠</span>
                        <span class="stat-num">0H</span>
                    </div>
                </div>
            </section>

            <section class="section-box">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path d="M12 14l9-5-9-5-9 5 9 5z" />
                            <path
                                d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                        </svg>
                        T√ÄI LI·ªÜU C√ÅC M√îN
                    </div>
                    <a href="#" class="view-all">Xem t·∫•t c·∫£</a>
                </div>
                <div class="carousel-wrapper">
                    <button class="btn-scroll btn-left" onclick="scrollDocs('left')">‚ùÆ</button>

                    <div class="teachers-scroll" id="docScrollContainer">
                        <div class="teacher-card" onclick="DocumentManager.navigateFromSubjectCard('Ph√°p lu·∫≠t ƒë·∫°i c∆∞∆°ng')" style="cursor: pointer;">
                            <img src="./img/pldc-pic.png" class="teacher-img" alt="Ph√°p lu·∫≠t">
                            <div class="teacher-info">
                                <h3 class="teacher-name">PH√ÅP LU·∫¨T ƒê·∫†I C∆Ø∆†NG</h3>
                            </div>
                        </div>
                        <div class="teacher-card" onclick="DocumentManager.navigateFromSubjectCard('T√¢m l√Ω h·ªçc ƒê·∫°i c∆∞∆°ng')" style="cursor: pointer;">
                            <img src="./img/tlhdc-pic.png" class="teacher-img" alt="T√¢m l√Ω">
                            <div class="teacher-info">
                                <h3 class="teacher-name">T√ÇM L√ù H·ªåC ƒê·∫†I C∆Ø∆†NG</h3>
                            </div>
                        </div>
                        <div class="teacher-card" onclick="DocumentManager.navigateFromSubjectCard('C∆° s·ªü to√°n trong CNTT')" style="cursor: pointer;">
                            <img src="./img/cst-pic.png" class="teacher-img" alt="C∆° s·ªü to√°n">
                            <div class="teacher-info">
                                <h3 class="teacher-name">C∆† S·ªû TO√ÅN TRONG CNTT</h3>
                            </div>
                        </div>
                        <div class="teacher-card" onclick="DocumentManager.navigateFromSubjectCard('To√°n r·ªùi r·∫°c')" style="cursor: pointer;">
                            <img src="./img/trr-pic.png" class="teacher-img" alt="To√°n r·ªùi r·∫°c">
                            <div class="teacher-info">
                                <h3 class="teacher-name">TO√ÅN R·ªúI R·∫†C</h3>
                            </div>
                        </div>
                        <div class="teacher-card" onclick="DocumentManager.navigateFromSubjectCard('Tri·∫øt h·ªçc M√°c Lenin')" style="cursor: pointer;">
                            <img src="./img/triethoc-pic.png" class="teacher-img" alt="Tri·∫øt h·ªçc">
                            <div class="teacher-info">
                                <h3 class="teacher-name">TRI·∫æT H·ªåC M√ÅC - L√äNIN</h3>
                            </div>
                        </div>
                    </div>
                    <button class="btn-scroll btn-right" onclick="scrollDocs('right')">‚ùØ</button>
                </div>

            </section>

            <section class="section-box">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path
                                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                        ƒê·ªÄ THI
                    </div>
                </div>
                <div class="courses-grid">
                    <div class="course-card" onclick="DocumentManager.navigateFromSubjectCard('Ph√°p lu·∫≠t ƒë·∫°i c∆∞∆°ng')" style="cursor: pointer;">
                        <img src="./img/pldc-pic.png" class="course-thumb" alt="Course">
                        <div class="course-content">
                            <h3 class="course-title">PH√ÅP LU·∫¨T ƒê·∫†I C∆Ø∆†NG</h3>
                            <div class="course-meta">
                                <svg width="14" height="14" viewBox="0 0 24 24">
                                    <path fill="currentColor"
                                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                                </svg>
                                Tr∆∞·ªùng ƒê·∫°i h·ªçc S∆∞ ph·∫°m Th√†nh ph·ªë H·ªì Ch√≠ Minh
                            </div>
                        </div>
                    </div>
                    <div class="course-card" onclick="DocumentManager.navigateFromSubjectCard('T√¢m l√Ω h·ªçc ƒê·∫°i c∆∞∆°ng')" style="cursor: pointer;">
                        <img src="./img/tlhdc-pic.png" class="course-thumb" alt="Course">
                        <div class="course-content">
                            <h3 class="course-title">T√ÇM L√ù H·ªåC ƒê·∫†I C∆Ø∆†NG</h3>
                            <div class="course-meta">
                                <svg width="14" height="14" viewBox="0 0 24 24">
                                    <path fill="currentColor"
                                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                                </svg>
                                Tr∆∞·ªùng ƒê·∫°i h·ªçc S∆∞ ph·∫°m Th√†nh ph·ªë H·ªì Ch√≠ Minh
                            </div>
                        </div>
                    </div>
                    <div class="course-card" onclick="DocumentManager.navigateFromSubjectCard('To√°n r·ªùi r·∫°c')" style="cursor: pointer;">
                        <img src="./img/trr-pic.png" class="course-thumb" alt="Course">
                        <div class="course-content">
                            <h3 class="course-title">TO√ÅN R·ªúI R·∫†C</h3>
                            <div class="course-meta">
                                <svg width="14" height="14" viewBox="0 0 24 24">
                                    <path fill="currentColor"
                                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                                </svg>
                                Tr∆∞·ªùng ƒê·∫°i h·ªçc S∆∞ ph·∫°m Th√†nh ph·ªë H·ªì Ch√≠ Minh
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section-box">
                <div class="section-header">
                    <div class="section-title">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path
                                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                        B·ªò TH·∫∫ FLASHCARD
                    </div>
                    <button class="btn-add-mini" onclick="FlashcardManager.openCreateModal()">+ T·∫°o b·ªô th·∫ª</button>
                </div>

                <div class="flashcard-widget-wrapper" style="position: relative;">
                    <button class="btn-scroll-deck btn-left" onclick="FlashcardManager.scrollDecks('left')">‚ùÆ</button>
                    <div class="flashcard-carousel" id="flashcard-scroll-container">
                        <!-- Flashcard decks will be rendered here by FlashcardManager -->
                    </div>
                    <button class="btn-scroll-deck btn-right" onclick="FlashcardManager.scrollDecks('right')">‚ùØ</button>
                </div>
            </section>
        </main>

        <section id="profile-section" style="display: none; width: 100%;">
            <div class="profile-grid">
                <div class="profile-sidebar-card">
                    <div class="profile-header-s">
                        <div class="large-avatar">H</div>
                        <h2 id="p-fullname-1">Tr·ªãnh Quang Huy</h2>
                        <p id="p-email-1">trinhquanghuy@gmail.com</p>
                    </div>

                    <div class="profile-menu">
                        <a href="#" id="menu-info" class="p-menu-item active"
                            onclick="ProfileManager.switchTab('info')">
                            <span>üÜî</span> Th√¥ng tin c√° nh√¢n
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                                </path>
                            </svg>
                        </a>
                        <a href="#" id="menu-my-docs" class="p-menu-item" onclick="ProfileManager.switchTab('my-docs')">
                            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                                <path d="M12 14l9-5-9-5-9 5 9 5z" />
                                <path
                                    d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                            </svg> T√†i li·ªáu c·ªßa t√¥i
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                                </path>
                            </svg>
                        </a>
                        <a href="#" id="menu-saved" class="p-menu-item" onclick="ProfileManager.switchTab('saved')">
                            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                                <path d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
                            </svg> T√†i li·ªáu ƒë√£ l∆∞u
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                                </path>
                            </svg>
                        </a>
                        <a href="#" class="p-menu-item">
                            <span>üéÅ</span> Kho v·∫≠t ph·∫©m
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                                </path>
                            </svg>
                        </a>
                    </div>
                </div>

                <div class="profile-content-card">
                    <div id="tab-info" class="profile-tab-content">
                        <div class="profile-top-header">
                            <h3>Th√¥ng tin c√° nh√¢n</h3>
                            <div class="profile-actions">
                                <button class="btn-edit" onclick="openEditProfileModal()">Ch·ªânh s·ª≠a th√¥ng tin</button>
                                <button class="btn-change-pass" onclick="openChangePassModal()">Thay ƒë·ªïi m·∫≠t
                                    kh·∫©u</button>
                            </div>
                        </div>

                        <div class="profile-details-list">
                            <div class="detail-row">
                                <span class="d-label">H·ªç v√† t√™n</span>
                                <span class="d-value" id="p-fullname-2">Tr·ªãnh Quang Huy</span>
                            </div>
                            <div class="detail-row">
                                <span class="d-label">T√†i kho·∫£n</span>
                                <span class="d-value" id="p-username">admin</span>
                            </div>
                            <div class="detail-row">
                                <span class="d-label">Email</span>
                                <span class="d-value" id="p-email-2">trinhquanghuy@gmail.com</span>
                            </div>
                            <div class="detail-row">
                                <span class="d-label">S·ªë ƒëi·ªán tho·∫°i</span>
                                <span class="d-value" id="p-phone">0393 xxx xxx</span>
                            </div>
                            <div class="detail-row">
                                <span class="d-label">Gi·ªõi t√≠nh</span>
                                <span class="d-value" id="p-gender">Nam</span>
                            </div>
                            <div class="detail-row">
                                <span class="d-label">NƒÉm sinh</span>
                                <span class="d-value" id="p-birth">2007</span>
                            </div>
                            <div class="detail-row">
                                <span class="d-label">Link Facebook</span>
                                <a href="#" class="d-value link" id="p-facebook">facebook.com/huy</a>
                            </div>
                            <div class="detail-row">
                                <span class="d-label">T·ªânh th√†nh</span>
                                <span class="d-value" id="p-city">H·ªì Ch√≠ Minh</span>
                            </div>
                            <div class="detail-row">
                                <span class="d-label">Tr∆∞·ªùng h·ªçc</span>
                                <span class="d-value" id="p-school">THPT T√¢y Th·∫°nh</span>
                            </div>
                        </div>
                    </div>

                    <div id="tab-my-docs" class="profile-tab-content" style="display: none;">
                        <div class="profile-top-header">
                            <h3>T√†i li·ªáu t√¥i ƒë√£ t·∫£i l√™n</h3>
                            <button class="btn-edit" onclick="openUploadDocModal()">+ T·∫£i m·ªõi</button>
                        </div>
                        <div id="profile-my-docs-list" class="documents-grid" style="grid-template-columns: 1fr 1fr;">
                        </div>
                    </div>

                    <div id="tab-saved" class="profile-tab-content" style="display: none;">
                        <div class="profile-top-header">
                            <h3>T√†i li·ªáu ƒë√£ l∆∞u</h3>
                        </div>
                        <div id="profile-saved-list" class="documents-grid" style="grid-template-columns: 1fr 1fr;">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Th√™m v√†o sau section profile-section -->
        <section id="documents-section" style="display: none; width: 100%;">
            <div class="documents-page">
                <!-- Header c·ªßa trang t√†i li·ªáu -->
                <div class="page-header">
                    <div class="page-title">
                        <h1>
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                                <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                            </svg>
                            Kho T√†i Li·ªáu Chung
                        </h1>
                        <p>T·ªïng h·ª£p t√†i li·ªáu h·ªçc t·∫≠p t·ª´ c√°c th√†nh vi√™n</p>
                    </div>
                    <button onclick="openUploadDocModal()" class="btn-upload-header">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                        </svg>
                        T·∫£i t√†i li·ªáu l√™n
                    </button>
                </div>

                <!-- B·ªô l·ªçc v√† t√¨m ki·∫øm -->
                <div class="docs-filter">
                    <div class="search-box">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <input type="text" id="docs-search" placeholder="T√¨m ki·∫øm t√†i li·ªáu..."
                            oninput="searchDocuments(this.value)">
                    </div>

                    <div class="filter-options">
                        <select id="doc-type-filter" onchange="filterByType(this.value)">
                            <option value="">T·∫•t c·∫£ lo·∫°i file</option>
                            <option value="pdf">PDF</option>
                            <option value="word">Word</option>
                            <option value="excel">Excel</option>
                            <option value="ppt">PowerPoint</option>
                            <option value="image">H√¨nh ·∫£nh</option>
                            <option value="other">Kh√°c</option>
                        </select>

                        <button class="btn-refresh" onclick="loadDocuments()">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                </path>
                            </svg>
                            L√†m m·ªõi
                        </button>
                    </div>
                </div>

                <!-- Course Filter for Documents -->
                <div class="course-filters-section">
                    <span class="filter-label">L·ªçc theo m√¥n:</span>
                    
                    <!-- Searchable Dropdown -->
                    <div class="course-dropdown-container">
                        <button class="course-dropdown-btn" id="courseDropdownBtn" onclick="DocumentManager.toggleCourseDropdown(event)">
                            <span class="dropdown-btn-text">T·∫•t c·∫£ m√¥n h·ªçc</span>
                            <span class="dropdown-btn-arrow">‚ñº</span>
                        </button>
                        
                        <div class="course-dropdown-menu" id="courseDropdownMenu">
                            <div class="course-dropdown-search">
                                <input 
                                    type="text" 
                                    class="course-search-input" 
                                    placeholder="T√¨m ki·∫øm m√¥n h·ªçc..."
                                    oninput="DocumentManager.searchCourseDropdown(this.value, event)"
                                />
                            </div>
                            <div class="course-dropdown-items">
                                <!-- Items will be rendered by JS -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats summary -->
                <div class="docs-stats">
                    <div class="stat-card">
                        <span class="stat-number" id="total-docs">0</span>
                        <span class="stat-label">T√†i li·ªáu</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="saved-docs">0</span>
                        <span class="stat-label">ƒê√£ l∆∞u</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="recent-docs">0</span>
                        <span class="stat-label">M·ªõi nh·∫•t 7 ng√†y</span>
                    </div>
                </div>

                <!-- Container cho danh s√°ch t√†i li·ªáu -->
                <div id="documents-list-container" class="documents-grid">
                    <!-- T√†i li·ªáu s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y -->
                </div>

                <!-- Pagination cho documents section -->
                <div id="pagination-container" class="pagination-container"></div>
            </div>
        </section>

        <section id="exams-section" style="display: none; width: 100%;">
            <div class="documents-page">
                <div class="page-header">
                    <div class="page-title">
                        <h1>üìù Th∆∞ Vi·ªán ƒê·ªÅ Thi</h1>
                        <p>Luy·ªán t·∫≠p v·ªõi ng√¢n h√†ng c√¢u h·ªèi tr·∫Øc nghi·ªám phong ph√∫</p>
                    </div>
                    <button class="btn-upload-header" onclick="ExamCreator.open()">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4">
                            </path>
                        </svg>
                        T·∫°o ƒë·ªÅ thi m·ªõi
                    </button>
                </div>

                <div class="docs-filter">
                    <div class="search-box">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <input type="text" id="exam-search" placeholder="T√¨m ki·∫øm ƒë·ªÅ thi..."
                            oninput="ExamManager.searchExams(this.value)">
                    </div>

                    <div class="filter-options">
                        <select id="exam-filter" onchange="ExamManager.filterBySubject(this.value)">
                            <option value="">T·∫•t c·∫£ m√¥n h·ªçc</option>
                            <option value="Ph√°p lu·∫≠t">Ph√°p lu·∫≠t ƒë·∫°i c∆∞∆°ng</option>
                            <option value="Tri·∫øt h·ªçc">Tri·∫øt h·ªçc M√°c - L√™nin</option>
                            <option value="To√°n">To√°n cao c·∫•p / R·ªùi r·∫°c</option>
                            <option value="Tin h·ªçc">Tin h·ªçc ƒë·∫°i c∆∞∆°ng</option>
                            <option value="T√¢m l√Ω">T√¢m l√Ω h·ªçc</option>
                        </select>
                    </div>
                </div>

                <div id="exams-list-container" class="exams-grid">
                </div>
            </div>
        </section>

        <section id="library-section" style="display: none;">
            <div class="doc-page-container">

                <div class="doc-page-header">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 class="doc-page-title">TH∆Ø VI·ªÜN T√ÄI LI·ªÜU S·ªê</h2>
                        <button onclick="openUploadDocModal()" class="btn-upload-header">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                            </svg>
                            T·∫£i t√†i li·ªáu l√™n
                        </button>
                    </div>

                    <!-- Search Instructions -->
                    <div class="search-instructions">
                        <div class="instructions-icon">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="instructions-text">
                            <strong>H∆∞·ªõng d·∫´n t√¨m ki·∫øm:</strong> D√πng c√°c tag m√¥n h·ªçc b√™n d∆∞·ªõi ƒë·ªÉ l·ªçc t√†i li·ªáu theo m√¥n,
                            ho·∫∑c g√µ t√™n t√†i li·ªáu v√†o √¥ t√¨m ki·∫øm ƒë·ªÉ t√¨m nhanh
                        </div>
                    </div>

                    <!-- Course Filter Tags -->
                    <div class="doc-course-filters">
                        <span class="filter-label">L·ªçc theo m√¥n:</span>
                        
                        <!-- Searchable Dropdown for Library -->
                        <div class="course-dropdown-container">
                            <button class="course-dropdown-btn" onclick="DocumentManager.toggleCourseDropdown(event)">
                                <span class="dropdown-btn-text">T·∫•t c·∫£ m√¥n h·ªçc</span>
                                <span class="dropdown-btn-arrow">‚ñº</span>
                            </button>
                            
                            <div class="course-dropdown-menu">
                                <div class="course-dropdown-search">
                                    <input 
                                        type="text" 
                                        class="course-search-input" 
                                        placeholder="üîç T√¨m ki·∫øm m√¥n h·ªçc..."
                                        oninput="DocumentManager.searchCourseDropdown(this.value, event)"
                                    />
                                </div>
                                <div class="course-dropdown-items">
                                    <!-- Items will be rendered by JS -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="doc-level-tags">
                        <button class="level-tag active">T·∫•t c·∫£</button>
                        <button class="level-tag">ƒê·∫°i h·ªçc</button>
                        <button class="level-tag">L·ªõp 12</button>
                        <button class="level-tag">L·ªõp 11</button>
                        <button class="level-tag">√în thi ƒêGNL</button>
                    </div>

                    <div class="doc-toolbar">
                        <div class="doc-type-filters">
                            <button class="type-filter-btn active" onclick="DocumentManager.filterLibrary('all')">T·∫•t
                                c·∫£</button>
                            <button class="type-filter-btn" onclick="DocumentManager.filterLibrary('pdf')">PDF</button>
                            <button class="type-filter-btn"
                                onclick="DocumentManager.filterLibrary('word')">Word</button>
                            <button class="type-filter-btn"
                                onclick="DocumentManager.filterLibrary('ppt')">Slide</button>
                        </div>

                        <div class="doc-search-big">
                            <input type="text" placeholder="T√¨m ki·∫øm t√†i li·ªáu..."
                                oninput="DocumentManager.searchLibrary(this.value)">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <div id="library-grid-container" class="doc-library-grid">
                </div>

                <div id="library-pagination" class="pagination-container"></div>

                <button onclick="PageManager.showDashboard()"
                    style="position: fixed; bottom: 20px; right: 20px; padding: 10px 20px; background: #374151; color: white; border-radius: 30px; border: none; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 1000;">
                    ‚Ü© Quay v·ªÅ Dashboard
                </button>
            </div>
        </section>

        <!-- COMMUNITY SECTION -->
        <section id="community-section" style="display: none; width: 100%;">
            <div class="community-container">
                <div class="community-header">
                    <h1>üåç C·ªông ƒê·ªìng</h1>
                    <div class="community-tabs">
                        <button class="tab-btn active" data-tab="feed">B·∫£ng Tin</button>
                        <button class="tab-btn" data-tab="saved">ƒê√£ L∆∞u</button>
                    </div>
                    <button class="btn-create-post">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                        </svg>
                        ƒêƒÉng B√†i
                    </button>
                </div>

                <div class="community-main">
                    <div id="community-feed" class="community-feed">
                        <!-- Posts will be rendered here -->
                    </div>
                </div>

                <button onclick="PageManager.showDashboard()"
                    style="position: fixed; bottom: 20px; right: 20px; padding: 10px 20px; background: #374151; color: white; border-radius: 30px; border: none; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 1000;">
                    ‚Ü© Quay v·ªÅ Dashboard
                </button>
            </div>
        </section>

        <!-- TIMETABLE SECTION -->
        <section id="timetable-section" style="display: none; width: 100%;">
            <div class="timetable-container">
                <div class="timetable-header">
                    <h1>üìÖ Th·ªùi Kh√≥a Bi·ªÉu</h1>
                    <button class="btn-add-class">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                        </svg>
                        Th√™m L·ªõp H·ªçc
                    </button>
                </div>
                <div class="timetable-wrapper">
                    <table class="timetable-table">
                        <thead>
                            <tr>
                                <th class="session-col">Bu·ªïi</th>
                                <th data-day="2">Th·ª© 2</th>
                                <th data-day="3">Th·ª© 3</th>
                                <th data-day="4">Th·ª© 4</th>
                                <th data-day="5">Th·ª© 5</th>
                                <th data-day="6">Th·ª© 6</th>
                                <th data-day="7">Th·ª© 7</th>
                                <th data-day="CN">CN</th>
                            </tr>
                        </thead>
                        <tbody id="timetable-body">
                            <!-- Rows will be generated by JS -->
                        </tbody>
                    </table>
                </div>
                <button onclick="PageManager.showDashboard()"
                    style="position: fixed; bottom: 20px; right: 20px; padding: 10px 20px; background: #374151; color: white; border-radius: 30px; border: none; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 1000;">
                    ‚Ü© Quay v·ªÅ Dashboard
                </button>
            </div>
        </section>



        <aside class="sidebar-right">

            <div class="widget-box upcoming-event">
                <div class="widget-header">
                    <h3>
                        <img src="./img/calendar.png" alt="Calendar Icon" style="width:14px; height:14px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                        S·ª± ki·ªán s·∫Øp t·ªõi
                    </h3>
                    <button type="button" onclick="event.stopPropagation(); if(window.EventManager) window.EventManager.openModal();" class="btn-add-event" title="Th√™m s·ª± ki·ªán">+</button>
                </div>
                <div class="event-list">
                    <!-- Events will be rendered here by EventManager -->
                </div>
            </div>

            <!-- Analytics Widget -->
            <div class="widget-box analytics-box">
                <div class="widget-header">
                    <h3>üìä Th·ªëng K√™ H·ªçc T·∫≠p</h3>
                </div>
                <div class="chart-container" style="margin-bottom: 20px;">
                    <p class="chart-title">Gi·ªù h·ªçc tu·∫ßn n√†y</p>
                    <canvas id="activityChart"></canvas>
                </div>
                <div class="chart-container">
                    <p class="chart-title">NƒÉng l·ª±c m√¥n h·ªçc</p>
                    <canvas id="skillsChart"></canvas>
                </div>
            </div>

            <div class="widget-box recent-activity">
                <div class="widget-header">
                    <h3>
                        <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"
                            style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                            <path d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                        Ho·∫°t ƒë·ªông m·ªõi
                    </h3>
                    <span class="badge-count">3</span>
                </div>
                <ul class="activity-list">
                    <li>
                        <div class="avatar-small">H</div>
                        <div class="activity-info">
                            <p><strong>Quang Huy</strong> v·ª´a t·∫£i l√™n</p>
                            <a href="#" class="file-link">De-thi-giua-ky-Toan.pdf</a>
                            <span class="time-ago">5 ph√∫t tr∆∞·ªõc</span>
                        </div>
                    </li>
                    <li>
                        <div class="avatar-small bg-green">B</div>
                        <div class="activity-info">
                            <p><strong>B√¨nh Gold</strong> ƒë√£ b√¨nh lu·∫≠n</p>
                            <a href="#" class="file-link">Trong "Gi·∫£i t√≠ch 1"</a>
                            <span class="time-ago">1 gi·ªù tr∆∞·ªõc</span>
                        </div>
                    </li>
                    <li>
                        <div class="avatar-small bg-purple">T</div>
                        <div class="activity-info">
                            <p><strong>Th·∫£o Nhi</strong> v·ª´a t·∫£i l√™n</p>
                            <a href="#" class="file-link">Slide-Tam-ly-hoc.pptx</a>
                            <span class="time-ago">2 gi·ªù tr∆∞·ªõc</span>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="widget-box group-storage">
                <div class="widget-header">
                    <h3>
                        <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"
                            style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                            <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                        </svg>
                        Kho T√†i Li·ªáu Chung
                    </h3>
                </div>

                <div class="storage-status">
                    <div class="storage-info">
                        <span>ƒê√£ d√πng</span>
                        <span class="storage-number" id="storage-usage">0 MB / 10 GB</span>
                    </div>

                    <div class="progress-track" style="display: flex; overflow: hidden;">
                        <div id="storage-bar-file" class="progress-bar-segment bar-file" style="width: 0%"></div>

                        <div id="storage-bar-image" class="progress-bar-segment bar-image" style="width: 0%"></div>
                    </div>

                    <div class="storage-detail" style="display: flex; justify-content: space-between; margin-top: 8px;">
                        <span id="storage-file-size" style="color: #4b5563; font-weight: 500;">
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                            </svg> Files: 0 MB
                        </span>
                        <span id="storage-image-size" style="color: #4b5563; font-weight: 500;">
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path
                                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg> ·∫¢nh: 0 MB
                        </span>
                    </div>
                </div>

                <button class="btn-upload-large" onclick="openUploadDocModal()">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12">
                        </path>
                    </svg>
                    T·∫£i t√†i li·ªáu m·ªõi
                </button>
            </div>


        </aside>

    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-grid">

                <div class="footer-col">
                    <div class="footer-brand">
                        <span class="brand-logo">M</span>
                        <span class="brand-name">Whalio Study</span>
                    </div>
                    <p class="footer-motto">
                        "H·ªçc kh√¥ng ch∆°i ƒë√°nh r∆°i tu·ªïi tr·∫ª,<br>
                        Ch∆°i kh√¥ng h·ªçc b√°n r·∫ª t∆∞∆°ng lai."
                    </p>
                    <div class="dev-credit">
                        Ph√°t tri·ªÉn b·ªüi <strong>Quang B√¨nh</strong>
                    </div>
                </div>

                <div class="footer-col">
                    <h4>L·ªëi t·∫Øt</h4>
                    <ul class="footer-links">
                        <li><a href="#">
                                <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                    style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                    <path
                                        d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                                </svg>
                                Kho t√†i li·ªáu chung</a></li>
                        <li><a href="#">
                                <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                    style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                    <path
                                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                L·ªãch thi / Deadline</a></li>
                        <li><a href="#">üìù Th·∫£o lu·∫≠n nh√≥m</a></li>
                        <li><a href="#">
                                <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                    style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                    <path d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                                Upload nhanh</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>C√¥ng c·ª• h·ªó tr·ª£</h4>
                    <ul class="footer-links">
                        <li>
                            <a href="https://hcmue.edu.vn" target="_blank">
                                üè´ Portal HCMUE
                            </a>
                        </li>
                        <li>
                            <a href="https://chatgpt.com" target="_blank">
                                ü§ñ ChatGPT
                            </a>
                        </li>
                        <li>
                            <a href="https://www.desmos.com" target="_blank">
                                üìà V·∫Ω ƒë·ªì th·ªã (Desmos)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.wolframalpha.com" target="_blank">
                                üßÆ WolframAlpha
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>C·∫ßn gi√∫p ƒë·ª°?</h4>
                    <p style="opacity: 0.8; margin-bottom: 12px; font-size: 13px;">
                        Web l·ªói hay kh√¥ng t·∫£i ƒë∆∞·ª£c file? Nh·∫Øn ngay cho Admin nh√©.
                    </p>
                    <a href="#" class="btn-contact-admin">
                        <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"
                            viewBox="0 0 24 24">
                            <path
                                d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z">
                            </path>
                        </svg>
                        Nh·∫Øn tin cho B√¨nh
                    </a>
                </div>

            </div>

            <div class="copyright">
                ¬© 2026 L∆∞u h√†nh n·ªôi b·ªô nh√≥m ‚Ä¢ Ch√∫c anh em qua m√¥n A+
            </div>
        </div>
    </footer>

    <div class="modal-overlay" id="loginModal">
        <div class="modal-box">
            <button class="btn-close-modal" onclick="closeLoginModal()">‚úï</button>

            <div class="modal-header">
                <h2>Ch√†o m·ª´ng tr·ªü l·∫°i!</h2>
                <p>ƒêƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p kho t√†i li·ªáu nh√≥m</p>
            </div>

            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                    <input type="text" class="auth-input" placeholder="V√≠ d·ª•: admin" required>
                </div>

                <div class="form-group">
                    <label class="form-label">M·∫≠t kh·∫©u</label>
                    <div class="password-wrapper">
                        <input type="password" id="passwordInput" class="auth-input" placeholder="Nh·∫≠p m·∫≠t kh·∫©u"
                            required>
                        <span class="toggle-pass" onclick="togglePassword(this)" title="Hi·ªán/·∫®n m·∫≠t kh·∫©u">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
                                </path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="form-options">
                    <label style="font-size: 13px; display: flex; align-items: center; gap: 6px;">
                        <input type="checkbox" checked> Ghi nh·ªõ t√¥i
                    </label>
                    <a href="#" class="forgot-link" onclick="openForgotPasswordModal()">Qu√™n m·∫≠t kh·∫©u?</a>
                </div>

                <button type="submit" class="btn-submit-login">ƒêƒÉng nh·∫≠p</button>
            </form>

            <div class="modal-footer">
                Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" onclick="switchToRegister()">ƒêƒÉng k√Ω</a>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="registerModal">
        <div class="modal-box">
            <button class="btn-close-modal" onclick="closeRegisterModal()">‚úï</button>

            <div class="modal-header">
                <h2>T·∫°o t√†i kho·∫£n m·ªõi üöÄ</h2>
                <p>Tham gia c·ªông ƒë·ªìng Whalio ngay h√¥m nay</p>
            </div>

            <form id="registerForm">
                <div class="form-group">
                    <label class="form-label">H·ªç v√† t√™n</label>
                    <input type="text" id="regFullname" class="auth-input" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="regEmail" class="auth-input" placeholder="ƒê·ªÉ l·∫•y l·∫°i m·∫≠t kh·∫©u khi qu√™n"
                        required>
                </div>

                <div class="form-group">
                    <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                    <input type="text" id="regUsername" class="auth-input" placeholder="Vi·∫øt li·ªÅn kh√¥ng d·∫•u" required>
                </div>

                <div class="form-group">
                    <label class="form-label">M·∫≠t kh·∫©u</label>
                    <div class="password-wrapper">
                        <input type="password" id="regPassword" class="auth-input" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
                        <span class="toggle-pass" onclick="togglePassword(this)" title="Hi·ªán/·∫®n m·∫≠t kh·∫©u">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
                                </path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u</label>
                    <div class="password-wrapper">
                        <input type="password" id="regConfirmPassword" class="auth-input"
                            placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u" required>
                        <span class="toggle-pass" onclick="togglePassword(this)" title="Hi·ªán/·∫®n m·∫≠t kh·∫©u">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
                                </path>
                            </svg>
                        </span>
                    </div>
                </div>

                <button type="submit" class="btn-submit-login">ƒêƒÉng k√Ω ngay</button>
            </form>

            <div class="modal-footer">
                ƒê√£ c√≥ t√†i kho·∫£n? <a href="#" onclick="switchToLogin()">ƒêƒÉng nh·∫≠p</a>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="customAlert" style="z-index: 3000;">
        <div class="modal-box" style="max-width: 320px; text-align: center; padding: 24px;">
            <div id="alertIcon" style="font-size: 48px; margin-bottom: 12px;">‚úÖ</div>

            <h3 id="alertTitle" style="font-size: 18px; margin-bottom: 8px; color: #1f2937;">Th√¥ng b√°o</h3>
            <p id="alertMessage" style="color: #6b7280; font-size: 14px; margin-bottom: 24px; line-height: 1.5;">
                N·ªôi dung th√¥ng b√°o ·ªü ƒë√¢y
            </p>

            <button onclick="closeCustomAlert()" class="btn-primary-block" style="padding: 10px; border-radius: 8px;">
                ƒê√≥ng
            </button>
        </div>
    </div>

    <div class="modal-overlay" id="logoutModal" style="z-index: 5000;">
        <div class="modal-box" style="max-width: 380px; text-align: center; padding: 30px 25px;">

            <div style="font-size: 50px; margin-bottom: 15px;">ü•∫</div>

            <h3 style="font-size: 20px; color: #1f2937; margin-bottom: 10px;">B·∫°n mu·ªën r·ªùi ƒëi sao?</h3>

            <p style="color: #6b7280; font-size: 15px; margin-bottom: 25px; line-height: 1.6;">
                N·∫øu ƒëƒÉng xu·∫•t, b·∫°n s·∫Ω kh√¥ng th·ªÉ t·∫£i t√†i li·ªáu hay b√¨nh lu·∫≠n ƒë∆∞·ª£c n·ªØa ƒë√¢u.
            </p>

            <div style="display: flex; gap: 12px; justify-content: center;">
                <button onclick="closeLogoutModal()"
                    style="padding: 10px 20px; border-radius: 8px; border: 1px solid #e5e7eb; background: white; color: #374151; font-weight: 500; cursor: pointer; flex: 1;">
                    ·ªû l·∫°i
                </button>

                <button onclick="confirmLogoutAction()"
                    style="padding: 10px 20px; border-radius: 8px; background: #ef4444; color: white; border: none; font-weight: 600; cursor: pointer; flex: 1; box-shadow: 0 4px 6px rgba(239, 68, 68, 0.2);">
                    ƒêƒÉng xu·∫•t
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="editProfileModal">
        <div class="modal-box" style="max-width: 600px;"> <button class="btn-close-modal"
                onclick="closeEditProfileModal()">‚úï</button>
            <div class="modal-header">
                <h2>C·∫≠p nh·∫≠t h·ªì s∆° ‚úèÔ∏è</h2>
            </div>

            <div style="display: flex; flex-direction: column; align-items: center; margin-bottom: 20px;">
                <div id="preview-avatar"
                    style="width: 80px; height: 80px; border-radius: 50%; background: #e5e7eb; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 10px; border: 2px solid var(--primary-color);">
                    <span id="preview-text" style="font-size: 30px; font-weight: bold; color: #6b7280;">H</span>
                    <img id="preview-img" src="" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                </div>
                <input type="file" id="avatar-input" accept="image/*" style="display: none;"
                    onchange="handleAvatarPreview()">
                <button type="button" onclick="document.getElementById('avatar-input').click()"
                    style="font-size: 13px; color: var(--primary-color); background: none; border: 1px dashed var(--primary-color); padding: 6px 12px; border-radius: 6px; cursor: pointer;">
                    <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                        style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                        <path
                            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    ƒê·ªïi ·∫£nh ƒë·∫°i di·ªán
                </button>
            </div>

            <form onsubmit="handleUpdateProfile(event)">
                <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">T√™n ƒëƒÉng nh·∫≠p (Kh√¥ng ƒë·ªïi ƒë∆∞·ª£c)</label>
                        <input type="text" id="edit-username" class="auth-input" disabled
                            style="background: #f3f4f6; color: #9ca3af;">
                    </div>
                    <div class="form-group" style="flex: 1.5;">
                        <label class="form-label">H·ªç v√† t√™n</label>
                        <input type="text" id="edit-fullname" class="auth-input" required>
                    </div>
                </div>

                <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">Email</label>
                        <input type="email" id="edit-email" class="auth-input">
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="text" id="edit-phone" class="auth-input">
                    </div>
                </div>

                <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">Gi·ªõi t√≠nh</label>
                        <select id="edit-gender" class="auth-input">
                            <option value="Nam">Nam</option>
                            <option value="N·ªØ">N·ªØ</option>
                            <option value="Kh√°c">Kh√°c</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">NƒÉm sinh</label>
                        <input type="number" id="edit-birth" class="auth-input">
                    </div>
                </div>

                <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">Tr∆∞·ªùng h·ªçc</label>
                        <input type="text" id="edit-school" class="auth-input">
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label class="form-label">T·ªânh / Th√†nh ph·ªë</label>
                        <input type="text" id="edit-city" class="auth-input">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Link Facebook</label>
                    <input type="text" id="edit-facebook" class="auth-input" placeholder="https://facebook.com/...">
                </div>

                <button type="submit" class="btn-submit-login">L∆∞u thay ƒë·ªïi</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="changePassModal">
        <div class="modal-box">
            <button class="btn-close-modal" onclick="closeChangePassModal()">‚úï</button>
            <div class="modal-header">
                <h2>ƒê·ªïi m·∫≠t kh·∫©u üîê</h2>
            </div>
            <form onsubmit="handleChangePassword(event)">
                <div class="form-group">
                    <label class="form-label">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
                    <input type="password" id="old-pass" class="auth-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">M·∫≠t kh·∫©u m·ªõi</label>
                    <input type="password" id="new-pass" class="auth-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi</label>
                    <input type="password" id="confirm-new-pass" class="auth-input" required>
                </div>
                <button type="submit" class="btn-submit-login">X√°c nh·∫≠n ƒë·ªïi</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="forgotPassModal">
        <div class="modal-box">
            <button class="btn-close-modal" onclick="closeForgotPasswordModal()">‚úï</button>
            <div class="modal-header">
                <h2>Kh√¥i ph·ª•c t√†i kho·∫£n üÜò</h2>
                <p>Nh·∫≠p th√¥ng tin ƒë·ªÉ x√°c minh danh t√≠nh</p>
            </div>
            <form onsubmit="handleResetPassword(event)">
                <div class="form-group">
                    <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                    <input type="text" id="fp-username" class="auth-input" placeholder="V√≠ d·ª•: admin" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email ƒëƒÉng k√Ω</label>
                    <input type="email" id="fp-email" class="auth-input" placeholder="Email c·ªßa t√†i kho·∫£n" required>
                </div>

                <div style="border-top: 1px dashed #e5e7eb; margin: 15px 0;"></div>

                <div class="form-group">
                    <label class="form-label">M·∫≠t kh·∫©u m·ªõi</label>
                    <input type="password" id="fp-newpass" class="auth-input" placeholder="ƒê·∫∑t m·∫≠t kh·∫©u m·ªõi" required>
                </div>

                <button type="submit" class="btn-submit-login">ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u</button>
            </form>
            <div class="modal-footer">
                Nh·ªõ ra r·ªìi? <a href="#" onclick="switchToLoginFromForgot()">ƒêƒÉng nh·∫≠p l·∫°i</a>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="uploadDocModal">
        <div class="modal-box">
            <button class="btn-close-modal" onclick="closeUploadDocModal()">‚úï</button>
            <div class="modal-header">
                <h2>
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"
                        style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                        <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                    </svg>
                    T·∫£i l√™n t√†i li·ªáu
                </h2>
            </div>
            <form id="uploadForm">
                <div class="form-group">
                    <label class="form-label">T√™n t√†i li·ªáu</label>
                    <input type="text" id="docName" class="auth-input" placeholder="VD: Gi·∫£i t√≠ch 1 - Ch∆∞∆°ng 2" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Ch·ªçn file</label>
                    <input type="file" id="docFile" class="auth-input" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Lo·∫°i file</label>
                    <select id="docType" class="auth-input">
                        <option value="pdf">PDF</option>
                        <option value="word">Word</option>
                        <option value="ppt">PowerPoint</option>
                        <option value="excel">Excel</option>
                        <option value="image">·∫¢nh</option>
                        <option value="other">Kh√°c</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Ch·∫ø ƒë·ªô hi·ªÉn th·ªã</label>
                    <select id="docVisibility" class="auth-input">
                        <option value="public">üåê C√¥ng khai (M·ªçi ng∆∞·ªùi ƒë·ªÅu th·∫•y)</option>
                        <option value="private">üîí Ri√™ng t∆∞ (Ch·ªâ m√¨nh t√¥i)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Ch·ªçn m√¥n h·ªçc</label>
                    <select id="docCourse" class="auth-input">
                        <option value="">-- Ch·ªçn m√¥n --</option>
                    </select>
                </div>

                <button type="submit" class="btn-submit-login">T·∫£i l√™n ngay</button>
            </form>
        </div>
    </div>

    <!-- Edit Document Modal -->
    <div class="modal-overlay" id="editDocModal">
        <div class="modal-box">
            <form onsubmit="DocumentManager.handleEditDocument(event)">
                <div class="form-group">
                    <label class="form-label">T√™n t√†i li·ªáu</label>
                    <input type="text" id="editDocName" class="auth-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ch·∫ø ƒë·ªô hi·ªÉn th·ªã</label>
                    <select id="editDocVisibility" class="auth-input">
                        <option value="public">üåê C√¥ng khai</option>
                        <option value="private">üîí Ri√™ng t∆∞</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ch·ªçn m√¥n h·ªçc</label>
                    <select id="editDocCourse" class="auth-input">
                        <option value="">-- Ch·ªçn m√¥n --</option>
                    </select>
                </div>
                <button type="submit" class="btn-submit-login">C·∫≠p nh·∫≠t</button>
            </form>
        </div>
    </div>

    <div id="study-focus-overlay" class="focus-overlay" style="display: none;">
        <button class="btn-exit-focus" onclick="StudyTimer.exit()">‚úï</button>

        <div class="flip-clock-container">
            <div class="flip-clock">
                <div class="flip-unit">
                    <div class="flip-card" id="f-hours" data-next="00">
                        <div class="top">00</div>
                        <div class="bottom">00</div>
                    </div>
                    <div class="unit-label">HOURS</div>
                </div>
                <div class="flip-separator">:</div>
                <div class="flip-clock">
                    <div class="flip-unit">
                        <div class="flip-card" id="f-minutes" data-next="25">
                            <div class="top">25</div>
                            <div class="bottom">25</div>
                        </div>
                        <div class="unit-label">MINUTES</div>
                    </div>
                    <div class="flip-separator">:</div>
                    <div class="flip-unit">
                        <div class="flip-card" id="f-seconds" data-next="00">
                            <div class="top">00</div>
                            <div class="bottom">00</div>
                        </div>
                        <div class="unit-label">SECONDS</div>
                    </div>
                </div>

                <div class="focus-controls">
                    <button class="f-btn-main" id="f-btn-toggle" onclick="StudyTimer.toggle()">B·∫ÆT ƒê·∫¶U</button>
                    <button class="f-btn-small" onclick="StudyTimer.reset()">‚Ü∫</button>
                    <button class="f-btn-small" onclick="StudyTimer.openSettings()">‚öôÔ∏è</button>
                </div>

                <div class="focus-presets">
                    <button onclick="StudyTimer.addTime(25)">25p</button>
                    <button onclick="StudyTimer.addTime(45)">45p</button>
                    <button onclick="StudyTimer.addTime(60)">60p</button>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="timePickerModal">
            <div class="modal-box" style="max-width: 380px;">
                <button class="btn-close-modal" onclick="closeTimePickerModal()">‚úï</button>
                <div class="modal-header">
                    <h2>‚è±Ô∏è Ch·ªçn Th·ªùi Gian T·∫≠p Trung</h2>
                    <p>ƒê·∫∑t th·ªùi gian h·ªçc t·∫≠p hi·ªáu qu·∫£ c·ªßa b·∫°n</p>
                </div>
                <div class="time-picker-body">
                    <div class="time-display">
                        <span id="time-value">25</span>
                        <span class="time-unit">ph√∫t</span>
                    </div>
                    <input type="range" id="time-slider" class="time-slider" min="5" max="120" value="25" step="5"
                        oninput="updateTimeDisplay(this.value)">
                    <div class="quick-presets">
                        <button class="preset-btn" onclick="setTimeFromModal(15)">15p</button>
                        <button class="preset-btn active" onclick="setTimeFromModal(25)">25p</button>
                        <button class="preset-btn" onclick="setTimeFromModal(45)">45p</button>
                        <button class="preset-btn" onclick="setTimeFromModal(60)">60p</button>
                        <button class="preset-btn" onclick="setTimeFromModal(90)">90p</button>
                    </div>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button onclick="closeTimePickerModal()" class="btn-cancel-modal">H·ªßy</button>
                    <button onclick="applyCustomTime()" class="btn-submit-login">‚úì X√°c nh·∫≠n</button>
                </div>
            </div>
        </div>

    </div>
    <div class="modal-overlay" id="examModeModal">
        <div class="modal-box" style="max-width: 500px; text-align: center;">
            <button class="btn-close-modal" onclick="ExamRunner.closeModeModal()">‚úï</button>
            <div class="modal-header">
                <h2>üéØ Ch·ªçn Ch·∫ø ƒê·ªô Thi</h2>
                <p>B·∫°n mu·ªën luy·ªán t·∫≠p hay thi th·ª≠?</p>
            </div>

            <div class="exam-modes-grid"
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 20px;">
                <div class="mode-card" onclick="ExamRunner.startExam('practice')"
                    style="cursor: pointer; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; transition: all 0.2s;">
                    <div style="font-size: 40px; margin-bottom: 10px;">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
                    <h3 style="color: var(--primary-color); margin-bottom: 5px;">Luy·ªán T·∫≠p</h3>
                    <p style="font-size: 13px; color: #6b7280;">Bi·∫øt ngay ƒë√°p √°n ƒë√∫ng sai. Xem gi·∫£i th√≠ch chi ti·∫øt sau
                        m·ªói c√¢u.</p>
                </div>

                <div class="mode-card" onclick="ExamRunner.startExam('real')"
                    style="cursor: pointer; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; transition: all 0.2s;">
                    <div style="font-size: 40px; margin-bottom: 10px;">‚è±Ô∏è</div>
                    <h3 style="color: #ef4444; margin-bottom: 5px;">Thi Th·∫≠t</h3>
                    <p style="font-size: 13px; color: #6b7280;">√Åp l·ª±c th·ªùi gian. Ph·∫£i l√†m h·∫øt m·ªõi ƒë∆∞·ª£c n·ªôp. C√≥ ƒëi·ªÉm s·ªë
                        cu·ªëi c√πng.</p>
                </div>
            </div>
        </div>
    </div>

    <template id="exam-interface-template">
        <div class="exam-container">
            <div class="exam-main-content">
                <div class="exam-sticky-header">
                    <div class="exam-info-left">
                        <button class="btn-back-exam" onclick="ExamRunner.exitExam()">‚Üê Tho√°t</button>
                        <span class="exam-timer" id="exam-timer">00:00</span>
                    </div>

                    <div class="exam-middle-bar">
                        <div class="progress-track-main">
                            <div id="main-progress-bar" class="progress-fill-main" style="width: 0%"></div>
                        </div>
                        <span id="progress-percent-text">0%</span>
                    </div>

                    <div class="exam-progress-text">
                        ƒê√£ l√†m: <b id="progress-text">0/0</b>
                    </div>
                </div>

                <div id="questions-container" class="questions-list"></div>
                <div class="exam-footer-action">
                    <button class="btn-submit-exam big" onclick="ExamRunner.submitExam()">N·ªòP B√ÄI THI</button>
                </div>
            </div>

            <div class="exam-sidebar-right">
                <div class="map-box">
                    <div class="map-header">
                        <h3>Danh s√°ch c√¢u h·ªèi</h3>
                        <span class="map-guide">
                            <span class="dot done"></span> ƒê√£ l√†m
                            <span class="dot pending"></span> Ch∆∞a l√†m
                        </span>
                    </div>
                    <div id="question-map-grid" class="question-map-grid"></div>
                </div>
            </div>
        </div>
    </template>

    <div class="modal-overlay" id="examResultModal">
        <div class="modal-box" style="max-width: 450px; text-align: center;">
            <div class="result-icon" style="font-size: 60px; margin-bottom: 10px;">üèÜ</div>
            <h2 style="color: var(--primary-color); margin-bottom: 5px;">K·∫øt Qu·∫£ B√†i Thi</h2>
            <p id="result-message" style="color: #6b7280; margin-bottom: 20px;">Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh!</p>

            <div class="result-score-box"
                style="background: #f3f4f6; padding: 20px; border-radius: 16px; margin-bottom: 24px;">
                <div style="font-size: 14px; color: #6b7280;">ƒêi·ªÉm s·ªë c·ªßa b·∫°n</div>
                <div id="result-score" style="font-size: 48px; font-weight: 800; color: var(--primary-color);">0/10
                </div>
                <div id="result-percent" style="font-size: 14px; font-weight: 600; color: #10b981;">0%</div>
            </div>

            <div style="display: flex; gap: 12px;">
                <button onclick="ExamRunner.reviewExam()" class="btn-secondary-block"
                    style="flex: 1; padding: 12px; border-radius: 10px; border: 1px solid #d1d5db; background: white; font-weight: 600;">
                    üîç Xem l·∫°i b√†i
                </button>
                <button onclick="ExamRunner.retryExam()" class="btn-primary-block" style="flex: 1; margin: 0;">
                    üîÑ Thi l·∫°i
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="exitConfirmModal" style="z-index: 1100;">
        <div class="modal-box" style="max-width: 380px; text-align: center; padding: 30px;">
            <div style="font-size: 48px; margin-bottom: 15px;">‚ö†Ô∏è</div>
            <h3 style="color: #1f2937; margin-bottom: 10px; font-size: 20px; font-weight: 700;">B·∫°n mu·ªën tho√°t b√†i thi?
            </h3>
            <p style="color: #6b7280; margin-bottom: 24px; font-size: 15px; line-height: 1.5;">
                N·∫øu tho√°t b√¢y gi·ªù, qu√° tr√¨nh l√†m b√†i hi·ªán t·∫°i c·ªßa b·∫°n s·∫Ω <b>kh√¥ng ƒë∆∞·ª£c l∆∞u l·∫°i</b>.
            </p>
            <div style="display: flex; gap: 12px;">
                <button onclick="ExamRunner.closeConfirmModal('exitConfirmModal')"
                    style="flex: 1; padding: 12px; border-radius: 10px; border: 1px solid #d1d5db; background: white; font-weight: 600; color: #374151; cursor: pointer; transition: all 0.2s;">
                    Quay l·∫°i
                </button>
                <button onclick="ExamRunner.confirmExit()"
                    style="flex: 1; padding: 12px; border-radius: 10px; border: none; background: #ef4444; font-weight: 600; color: white; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);">
                    Tho√°t ngay
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="submitConfirmModal" style="z-index: 1100;">
        <div class="modal-box" style="max-width: 380px; text-align: center; padding: 30px;">
            <div style="font-size: 48px; margin-bottom: 15px;">üì§</div>
            <h3 style="color: #1f2937; margin-bottom: 10px; font-size: 20px; font-weight: 700;">X√°c nh·∫≠n n·ªôp b√†i?</h3>
            <p style="color: #6b7280; margin-bottom: 24px; font-size: 15px; line-height: 1.5;">
                B·∫°n ƒë√£ ch·∫Øc ch·∫Øn mu·ªën k·∫øt th√∫c b√†i thi v√† xem k·∫øt qu·∫£ ch∆∞a?
            </p>
            <div style="display: flex; gap: 12px;">
                <button onclick="ExamRunner.closeConfirmModal('submitConfirmModal')"
                    style="flex: 1; padding: 12px; border-radius: 10px; border: 1px solid #d1d5db; background: white; font-weight: 600; color: #374151; cursor: pointer; transition: all 0.2s;">
                    ƒê·ªÉ xem l·∫°i
                </button>
                <button onclick="ExamRunner.confirmSubmit()"
                    style="flex: 1; padding: 12px; border-radius: 10px; border: none; background: var(--primary-color); font-weight: 600; color: white; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 12px rgba(19, 70, 145, 0.2);">
                    N·ªôp b√†i ngay
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="deleteDocConfirmModal" style="z-index: 9999;">
        <div class="modal-box" style="max-width: 400px; text-align: center; padding: 30px;">
            <div
                style="width: 80px; height: 80px; background: #fee2e2; color: #ef4444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; margin: 0 auto 20px;">
                üóëÔ∏è
            </div>

            <h3 style="color: #1f2937; margin-bottom: 10px; font-size: 22px; font-weight: 700;">X√≥a t√†i li·ªáu n√†y?</h3>

            <p style="color: #6b7280; margin-bottom: 24px; font-size: 15px; line-height: 1.6;">
                H√†nh ƒë·ªông n√†y <b>kh√¥ng th·ªÉ ho√†n t√°c</b>. T√†i li·ªáu s·∫Ω b·ªã x√≥a vƒ©nh vi·ªÖn kh·ªèi
                h·ªá th·ªëng.
            </p>

            <div style="display: flex; gap: 12px; pointer-events: auto;">
                <button onclick="DocumentManager.closeDeleteModal()"
                    style="flex: 1; padding: 12px; border-radius: 10px; border: 1px solid #d1d5db; background: white; font-weight: 600; color: #374151; cursor: pointer; transition: 0.2s; pointer-events: auto;">
                    H·ªßy b·ªè
                </button>
                <button onclick="DocumentManager.confirmDeleteAction()"
                    style="flex: 1; padding: 12px; border-radius: 10px; border: none; background: #ef4444; font-weight: 600; color: white; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.25); pointer-events: auto;">
                    X√≥a ngay
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="createExamModal" style="z-index: 2000;">
        <div class="modal-box" style="max-width: 700px; max-height: 90vh; display: flex; flex-direction: column;">
            <button class="btn-close-modal" onclick="ExamCreator.close()">‚úï</button>

            <div class="modal-header" style="flex-shrink: 0;">
                <h2>üìù T·∫°o ƒê·ªÅ T·ª´ File</h2>
                <p>H·ªó tr·ª£ file Word (.docx)</p>
            </div>

            <div style="flex: 1; overflow-y: auto; padding: 4px;">

                <!-- Step 0: Mode Selection -->
                <div id="step-mode-selection">
                    <div class="exam-modes-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 20px;">
                        <div class="mode-card" onclick="ExamCreator.selectMode('multiple_choice')" 
                            style="cursor: pointer; border: 2px solid #e5e7eb; border-radius: 12px; padding: 30px; transition: all 0.2s; text-align: center;">
                            <div style="font-size: 50px; margin-bottom: 15px;">‚òëÔ∏è</div>
                            <h3 style="color: var(--primary-color); margin-bottom: 8px; font-size: 18px;">Tr·∫Øc nghi·ªám</h3>
                            <p style="font-size: 13px; color: #6b7280; line-height: 1.5;">C√¢u h·ªèi c√≥ 4 ƒë√°p √°n A, B, C, D. Ch·ªçn 1 ƒë√°p √°n ƒë√∫ng.</p>
                        </div>

                        <div class="mode-card" onclick="ExamCreator.selectMode('essay')" 
                            style="cursor: pointer; border: 2px solid #e5e7eb; border-radius: 12px; padding: 30px; transition: all 0.2s; text-align: center;">
                            <div style="font-size: 50px; margin-bottom: 15px;">üìù</div>
                            <h3 style="color: #10b981; margin-bottom: 8px; font-size: 18px;">T·ª± lu·∫≠n</h3>
                            <p style="font-size: 13px; color: #6b7280; line-height: 1.5;">C√¢u h·ªèi m·ªü, ng∆∞·ªùi d√πng t·ª± nh·∫≠p c√¢u tr·∫£ l·ªùi.</p>
                        </div>
                    </div>
                    
                    <div style="background: #fef3c7; border: 1px solid #fbbf24; padding: 14px; border-radius: 8px; margin-top: 24px; font-size: 13px; color: #92400e;">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                            <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <b>L∆∞u √Ω:</b> Ch·ªçn lo·∫°i ƒë·ªÅ ph√π h·ª£p v·ªõi file Word c·ªßa b·∫°n. Sau khi ch·ªçn, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ph√¢n t√≠ch file.
                    </div>
                </div>

                <div id="step-upload" style="display: none;">
                    <div class="upload-area" onclick="document.getElementById('exam-file-upload').click()"
                        style="border: 2px dashed #d1d5db; padding: 40px; text-align: center; border-radius: 12px; cursor: pointer; transition: 0.2s; background: #f9fafb;">
                        <div style="font-size: 40px; margin-bottom: 10px;">
                            <svg width="40" height="40" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                            </svg>
                        </div>
                        <p style="font-weight: 600; color: #4b5563;">Nh·∫•n ƒë·ªÉ ch·ªçn file Word (.docx)</p>
                        <p style="font-size: 13px; color: #6b7280; margin-top: 8px;">
                            H·ªá th·ªëng t·ª± ƒë·ªông ch·ªçn ƒë√°p √°n ƒë√∫ng n·∫øu th·∫•y:<br>
                            <b>In ƒë·∫≠m</b>, <i>In nghi√™ng</i>, <u>G·∫°ch ch√¢n</u>, <span style="color:red">M√†u ƒë·ªè</span>
                            ho·∫∑c <span style="background: yellow; color: black; padding: 0 4px;">Highlight</span> <br>
                            N·∫øu l√† t·ª± lu·∫≠n th√¨ trong file ph·∫£i c√≥ s·ªë c√¢u, s·ªë b√†i VD: C√¢u 1, C√¢u 2,... <br>
                            <i>L∆∞u √Ω: H·ªá th·ªëng s·∫Ω kh√¥ng t·ª± ƒë·ªông ch·ªçn ƒë√°p √°n ƒë√∫ng cho c√¢u h·ªèi t·ª± lu·∫≠n.T√≠nh nƒÉng n√†y ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn.</i>

                        </p>
                        <input type="file" id="exam-file-upload" accept=".docx" style="display: none;"
                            onchange="ExamCreator.handleFile(event)">
                    </div>
                </div>

                <div id="step-review" style="display: none; flex-direction: column; gap: 15px;">
                    <div
                        style="background: #eef2ff; border: 1px solid #c7d2fe; padding: 12px; border-radius: 8px; font-size: 13px; color: #3730a3;">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"
                            style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                            <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <b>Ki·ªÉm tra k·ªπ:</b> B·∫°n c√≥ th·ªÉ s·ª≠a n·ªôi dung c√¢u h·ªèi, ch·ªçn l·∫°i ƒë√°p √°n ƒë√∫ng ho·∫∑c x√≥a c√¢u h·ªèi
                        r√°c tr∆∞·ªõc khi t·∫°o ƒë·ªÅ.
                    </div>

                    <div id="review-list" style="display: flex; flex-direction: column; gap: 15px;"></div>
                </div>

                <div id="step-config" style="display: none; padding-top: 10px;">
                    <div class="form-group">
                        <label class="form-label">T√™n ƒë·ªÅ thi</label>
                        <input type="text" id="new-exam-title" class="auth-input"
                            placeholder="VD: Ki·ªÉm tra 1 ti·∫øt To√°n">
                    </div>

                    <div style="display: flex; gap: 16px; margin-bottom: 16px;">
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">Th·ªùi gian (ph√∫t)</label>
                            <input type="number" id="new-exam-time" class="auth-input" value="45">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">M√¥n h·ªçc</label>
                            <select id="new-exam-subject" class="auth-input">
                                <option value="T·ª± do">T·ª± do</option>
                                <option value="To√°n">To√°n</option>
                                <option value="VƒÉn">VƒÉn</option>
                                <option value="Anh">Anh</option>
                                <option value="Ph√°p lu·∫≠t">Ph√°p lu·∫≠t</option>
                                <option value="Tri·∫øt h·ªçc">Tri·∫øt h·ªçc</option>
                            </select>
                        </div>
                    </div>

                    <div
                        style="background: #ecfdf5; border: 1px solid #a7f3d0; padding: 16px; border-radius: 12px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <span style="font-size: 20px;">‚úÖ</span>
                            <span style="color: #065f46; font-weight: 600;">H·ªá th·ªëng ƒë√£ s·∫µn s√†ng!</span>
                        </div>
                        <ul style="padding-left: 20px; color: #047857; font-size: 13px; line-height: 1.6;">
                            <li>T·ªïng s·ªë c√¢u h·ªèi t√¨m th·∫•y: <b id="found-questions">0</b></li>
                            <li>S·ªë c√¢u s·∫Ω l·∫•y v√†o ƒë·ªÅ:
                                <input type="number" id="new-exam-limit"
                                    style="width: 60px; padding: 4px; border-radius: 4px; border: 1px solid #10b981; font-weight: bold; text-align: center;">
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
            <div class="modal-footer-actions"
                style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #e5e7eb; display: flex; gap: 10px; flex-shrink: 0;">
                <button id="btn-back-step" onclick="ExamCreator.backStep()" class="btn-cancel-modal"
                    style="display: none;">Quay l·∫°i</button>

                <button id="btn-main-action" onclick="ExamCreator.nextStep()" class="btn-submit-login">Ti·∫øp t·ª•c
                    ‚ûî</button>
            </div>

        </div>
    </div>

    <!-- COMMUNITY MODALS -->
    <!-- Create Post Modal -->
    <div class="modal-overlay" id="createPostModal" style="z-index: 2500; display: none;">
        <div class="modal-box" style="max-width: 600px;">
            <button class="btn-close-modal" onclick="Community.closeCreatePostModal()">‚úï</button>
            <div class="modal-header">
                <h2>‚úçÔ∏è T·∫°o B√†i Vi·∫øt M·ªõi</h2>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <textarea id="postContent" class="form-input" placeholder="B·∫°n ƒëang nghƒ© g√¨?" rows="5"
                    style="width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; font-family: inherit; font-size: 14px;"></textarea>

                <div style="margin-top: 16px; display: flex; gap: 12px;">
                    <label
                        style="flex: 1; display: flex; align-items: center; gap: 8px; padding: 10px; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; background: #f9fafb;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span>·∫¢nh</span>
                        <input type="file" id="postImages" accept="image/*" multiple style="display: none;">
                    </label>
                    <label
                        style="flex: 1; display: flex; align-items: center; gap: 8px; padding: 10px; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; background: #f9fafb;">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                        <span>File</span>
                        <input type="file" id="postFiles" accept=".pdf,.doc,.docx,.xls,.xlsx,.zip" multiple
                            style="display: none;">
                    </label>
                </div>

                <!-- Preview Container -->
                <div id="filePreviewContainer"
                    style="display: none; margin-top: 16px; padding: 12px; background: #f3f4f6; border-radius: 8px; border: 1px solid #e5e7eb;">
                    <div id="imagePreview" style="display: none; margin-bottom: 12px;">
                        <strong style="font-size: 13px;">
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path
                                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            ·∫¢nh ƒë∆∞·ª£c ch·ªçn:
                        </strong>
                        <div id="imagePreviewList"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 8px; margin-top: 8px;">
                        </div>
                    </div>
                    <div id="filePreview" style="display: none;">
                        <strong style="font-size: 13px;">
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path
                                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            File ƒë∆∞·ª£c ch·ªçn:
                        </strong>
                        <div id="filePreviewList" style="margin-top: 8px;"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer-actions" style="margin-top: 20px; display: flex; gap: 10px;">
                <button onclick="Community.closeCreatePostModal()" class="btn-cancel-modal"
                    style="flex: 1;">H·ªßy</button>
                <button class="btn-submit-create-post btn-submit-login" style="flex: 1;">ƒêƒÉng B√†i</button>
            </div>
        </div>
    </div>

    <!-- Comment Modal -->
    <div class="modal-overlay" id="commentModal" style="z-index: 2500; display: none;">
        <div class="modal-box" style="max-width: 550px;">
            <button class="btn-close-modal" onclick="Community.closeCommentModal()">‚úï</button>
            <div class="modal-header">
                <h2>
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"
                        style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                        <path
                            d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z" />
                    </svg>
                    B√¨nh Lu·∫≠n
                </h2>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <!-- Comments List -->
                <div id="commentsList"
                    style="max-height: 300px; overflow-y: auto; margin-bottom: 20px; padding: 10px; background: #f9fafb; border-radius: 8px;">
                    <p style="text-align: center; color: #9ca3af; padding: 20px;">Ch∆∞a c√≥ b√¨nh lu·∫≠n n√†o</p>
                </div>

                <!-- Comment Input with Avatar -->
                <div style="display: flex; gap: 10px; align-items: flex-start; margin-bottom: 12px;">
                    <img src="img/avt.png" class="comment-input-avatar"
                        style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover;" alt="avatar">
                    <div style="flex: 1;">
                        <textarea id="commentContent" class="form-input" placeholder="Vi·∫øt b√¨nh lu·∫≠n..." rows="3"
                            style="width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; font-family: inherit; font-size: 14px;"></textarea>
                    </div>
                </div>

                <div style="margin-top: 12px; display: flex; gap: 10px;">
                    <label
                        style="flex: 1; display: flex; align-items: center; gap: 6px; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; cursor: pointer; background: #f9fafb; font-size: 13px;">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span>·∫¢nh</span>
                        <input type="file" id="commentImages" accept="image/*" multiple style="display: none;">
                    </label>
                    <label
                        style="flex: 1; display: flex; align-items: center; gap: 6px; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; cursor: pointer; background: #f9fafb; font-size: 13px;">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                        <span>File</span>
                        <input type="file" id="commentFiles" accept=".pdf,.doc,.docx,.xls,.xlsx,.zip,.txt" multiple
                            style="display: none;">
                    </label>
                </div>

                <!-- Preview Container -->
                <div id="commentFilePreviewContainer"
                    style="display: none; margin-top: 10px; padding: 10px; background: #f3f4f6; border-radius: 6px; border: 1px solid #e5e7eb; font-size: 12px;">
                    <div id="commentImagePreview" style="display: none; margin-bottom: 8px;">
                        <strong>
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path
                                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            ·∫¢nh:
                        </strong>
                        <div id="commentImagePreviewList"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 6px; margin-top: 6px;">
                        </div>
                    </div>
                    <div id="commentFilePreview" style="display: none;">
                        <strong>
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path
                                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            File:
                        </strong>
                        <div id="commentFilePreviewList" style="margin-top: 6px;"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer-actions" style="margin-top: 16px; display: flex; gap: 10px;">
                <button onclick="Community.closeCommentModal()" class="btn-cancel-modal" style="flex: 1;">H·ªßy</button>
                <button class="btn-submit-comment btn-submit-login" style="flex: 1;">G·ª≠i</button>
            </div>
        </div>
    </div>

    <!-- Reply Comment Modal -->
    <div class="modal-overlay" id="replyCommentModal" style="z-index: 2500; display: none;">
        <div class="modal-box" style="max-width: 550px;">
            <button class="btn-close-modal" onclick="Community.closeReplyCommentModal()">‚úï</button>
            <div class="modal-header">
                <h2>
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"
                        style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                        <path d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
                    </svg>
                    Tr·∫£ L·ªùi B√¨nh Lu·∫≠n
                </h2>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div id="replyingToComment"
                    style="padding: 10px; background: #f3f4f6; border-radius: 6px; margin-bottom: 12px; border-left: 3px solid #6366f1; font-size: 13px;">
                </div>
                <textarea id="replyCommentContent" class="form-input" placeholder="Tr·∫£ l·ªùi b√¨nh lu·∫≠n..." rows="4"
                    style="width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; font-family: inherit; font-size: 14px;"></textarea>

                <div style="margin-top: 12px; display: flex; gap: 10px;">
                    <label
                        style="flex: 1; display: flex; align-items: center; gap: 6px; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; cursor: pointer; background: #f9fafb; font-size: 13px;">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span>·∫¢nh</span>
                        <input type="file" id="replyImages" accept="image/*" multiple style="display: none;">
                    </label>
                    <label
                        style="flex: 1; display: flex; align-items: center; gap: 6px; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; cursor: pointer; background: #f9fafb; font-size: 13px;">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                        </svg>
                        <span>File</span>
                        <input type="file" id="replyFiles" accept=".pdf,.doc,.docx,.xls,.xlsx,.zip,.txt" multiple
                            style="display: none;">
                    </label>
                </div>

                <!-- Preview Container -->
                <div id="replyFilePreviewContainer"
                    style="display: none; margin-top: 10px; padding: 10px; background: #f3f4f6; border-radius: 6px; border: 1px solid #e5e7eb; font-size: 12px;">
                    <div id="replyImagePreview" style="display: none; margin-bottom: 8px;">
                        <strong>
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path
                                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            ·∫¢nh:
                        </strong>
                        <div id="replyImagePreviewList"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 6px; margin-top: 6px;">
                        </div>
                    </div>
                    <div id="replyFilePreview" style="display: none;">
                        <strong>
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24"
                                style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path
                                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            File:
                        </strong>
                        <div id="replyFilePreviewList" style="margin-top: 6px;"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer-actions" style="margin-top: 16px; display: flex; gap: 10px;">
                <button onclick="Community.closeReplyCommentModal()" class="btn-cancel-modal"
                    style="flex: 1;">H·ªßy</button>
                <button onclick="Community.submitReplyComment()" class="btn-submit-login" style="flex: 1;">G·ª≠i</button>
            </div>
        </div>
    </div>

    <!-- Edit Post Modal -->
    <div class="modal-overlay" id="editPostModal" style="z-index: 2500; display: none;">
        <div class="modal-box" style="max-width: 600px;">
            <button class="btn-close-modal" onclick="Community.closeEditPostModal()">‚úï</button>
            <div class="modal-header">
                <h2>‚úèÔ∏è Ch·ªânh S·ª≠a B√†i Vi·∫øt</h2>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <textarea id="editPostContent" class="form-input" placeholder="N·ªôi dung b√†i vi·∫øt..." rows="5"
                    style="width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; font-family: inherit; font-size: 14px;"></textarea>
            </div>
            <div class="modal-footer-actions" style="margin-top: 20px; display: flex; gap: 10px;">
                <button onclick="Community.closeEditPostModal()" class="btn-cancel-modal" style="flex: 1;">H·ªßy</button>
                <button class="btn-submit-edit-post btn-submit-login" style="flex: 1;">C·∫≠p Nh·∫≠t</button>
            </div>
        </div>
    </div>

    <!-- Edit Comment Modal -->
    <div class="modal-overlay" id="editCommentModal" style="z-index: 2500; display: none;">
        <div class="modal-box" style="max-width: 500px;">
            <button class="btn-close-modal" onclick="Community.closeEditCommentModal()">‚úï</button>
            <div class="modal-header">
                <h2>‚úèÔ∏è Ch·ªânh S·ª≠a B√¨nh Lu·∫≠n</h2>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <textarea id="editCommentContent" class="form-input" placeholder="N·ªôi dung b√¨nh lu·∫≠n..." rows="4"
                    style="width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; font-family: inherit; font-size: 14px;"></textarea>
            </div>
            <div class="modal-footer-actions" style="margin-top: 20px; display: flex; gap: 10px;">
                <button onclick="Community.closeEditCommentModal()" class="btn-cancel-modal"
                    style="flex: 1;">H·ªßy</button>
                <button onclick="Community.submitEditComment()" class="btn-submit-login" style="flex: 1;">C·∫≠p
                    Nh·∫≠t</button>
            </div>
        </div>
    </div>

    <!-- Edit Reply Modal -->
    <div class="modal-overlay" id="editReplyModal" style="z-index: 2500; display: none;">
        <div class="modal-box" style="max-width: 500px;">
            <button class="btn-close-modal" onclick="Community.closeEditReplyModal()">‚úï</button>
            <div class="modal-header">
                <h2>‚úèÔ∏è Ch·ªânh S·ª≠a Tr·∫£ L·ªùi</h2>
            </div>
            <div class="modal-body">
                <textarea id="editReplyContent" class="form-input" placeholder="N·ªôi dung tr·∫£ l·ªùi..." rows="4"
                    style="width: 100%; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; font-family: inherit; font-size: 14px;"></textarea>
            </div>
            <div class="modal-footer-actions" style="margin-top: 20px; display: flex; gap: 10px;">
                <button onclick="Community.closeEditReplyModal()" class="btn-cancel-modal" style="flex: 1;">H·ªßy</button>
                <button onclick="Community.submitEditReply()" class="btn-submit-login" style="flex: 1;">C·∫≠p
                    Nh·∫≠t</button>
            </div>
        </div>
    </div>

    <!-- Create Class Modal -->
    <div class="modal-overlay" id="createClassModal" style="display: none;">
        <div class="modal-box" style="max-width: 520px;">
            <button class="btn-close-modal" onclick="Timetable.closeCreateModal()">‚úï</button>
            <div class="modal-header">
                <h2>‚ûï Th√™m L·ªõp H·ªçc</h2>
                <p>ƒêi·ªÅn th√¥ng tin l·ªõp h·ªçc v√†o th·ªùi kh√≥a bi·ªÉu</p>
            </div>
            <form id="createClassForm" class="modal-body" style="padding: 16px;">
                <!-- Row 1: T√™n m√¥n h·ªçc (Full width) -->
                <div class="form-group">
                    <label class="form-label">T√™n m√¥n h·ªçc</label>
                    <input type="text" id="classSubject" class="form-input" placeholder="V√≠ d·ª•: To√°n cao c·∫•p" required>
                </div>

                <!-- Row 2: Ph√≤ng h·ªçc | Th·ª© -->
                <div class="form-grid-2">
                    <div class="form-group">
                        <label class="form-label">Ph√≤ng h·ªçc</label>
                        <input type="text" id="classRoom" class="form-input" placeholder="V√≠ d·ª•: A101" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">C∆° s·ªü</label>
                        <input type="text" id="classCampus" class="form-input"
                            placeholder="Nh·∫≠p c∆° s·ªü">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Th·ª©</label>
                        <select id="classDay" class="form-input" required>
                            <option value="2">Th·ª© Hai</option>
                            <option value="3">Th·ª© Ba</option>
                            <option value="4">Th·ª© T∆∞</option>
                            <option value="5">Th·ª© NƒÉm</option>
                            <option value="6">Th·ª© S√°u</option>
                            <option value="7">Th·ª© B·∫£y</option>
                            <option value="CN">Ch·ªß Nh·∫≠t</option>
                        </select>
                    </div>
                </div>

                <!-- Row 3: Bu·ªïi | Ti·∫øt b·∫Øt ƒë·∫ßu -->
                <div class="form-grid-2">
                    <div class="form-group">
                        <label class="form-label">Bu·ªïi</label>
                        <select id="classSession" class="form-input" required>
                            <option value="morning">S√°ng</option>
                            <option value="afternoon">Chi·ªÅu</option>
                            <option value="evening">T·ªëi</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ti·∫øt b·∫Øt ƒë·∫ßu</label>
                        <select id="classStartPeriod" class="form-input" required>
                            <option value="1">Ti·∫øt 1 (06:30)</option>
                            <option value="2">Ti·∫øt 2 (07:20)</option>
                            <option value="3">Ti·∫øt 3 (08:10)</option>
                            <option value="4">Ti·∫øt 4 (09:10)</option>
                            <option value="5">Ti·∫øt 5 (10:00)</option>
                            <option value="6">Ti·∫øt 6 (10:50)</option>
                            <option value="7">Ti·∫øt 7 (12:30)</option>
                            <option value="8">Ti·∫øt 8 (13:20)</option>
                            <option value="9">Ti·∫øt 9 (14:10)</option>
                            <option value="10">Ti·∫øt 10 (15:10)</option>
                            <option value="11">Ti·∫øt 11 (16:00)</option>
                            <option value="12">Ti·∫øt 12 (16:50)</option>
                            <option value="13">Ti·∫øt 13 (17:50)</option>
                            <option value="14">Ti·∫øt 14 (18:40)</option>
                            <option value="15">Ti·∫øt 15 (19:50)</option>
                        </select>
                    </div>
                </div>

                <!-- Row 4: S·ªë ti·∫øt (Full width) -->
                <div class="form-group">
                    <label class="form-label">S·ªë ti·∫øt</label>
                    <input type="number" id="classNumPeriods" class="form-input" min="1" max="5" value="2" required>
                </div>

                <!-- Th·ªùi gian t·ª± ƒë·ªông -->
                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">Th·ªùi gian (T·ª± ƒë·ªông)</label>
                    <div id="calculatedTime"
                        style="font-size: 15px; font-weight: 600; color: #6366f1; padding: 8px 12px; background: #f0f2f5; border-radius: 6px; text-align: center;">
                        06:30 - 08:05</div>
                </div>

                <button type="button" class="btn-submit-create-class"
                    style="width: 100%; background: #6366f1; color: white; padding: 11px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin-top: 14px;">
                    üíæ L∆∞u L·ªõp H·ªçc
                </button>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="./js/main.js"></script>
    <script src="./js/exam.js"></script>
    <script src="./js/gpa-calculator.js"></script>
    <script src="./js/community.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>

    <!-- Events Modal -->
    <div id="eventsModal" class="modal-overlay" style="display: none; z-index: 2050;" onclick="if(event.target === this && window.EventManager) window.EventManager.closeModal()">
        <div class="modal-box" style="max-width: 700px; max-height: 85vh; display: flex; flex-direction: column;">
            <button type="button" class="btn-close-modal" onclick="event.stopPropagation(); if(window.EventManager) window.EventManager.closeModal()">‚úï</button>

            <div class="modal-header">
                <h2>üìÖ Qu·∫£n l√Ω S·ª± ki·ªán</h2>
                <p>Th√™m v√† qu·∫£n l√Ω c√°c s·ª± ki·ªán s·∫Øp t·ªõi</p>
            </div>

            <div style="flex: 1; overflow-y: auto; padding: 20px; display: grid; grid-template-columns: 1fr 1.2fr; gap: 20px;">
                <!-- LEFT: Form -->
                <div>
                    <h3 style="margin: 0 0 16px 0; color: #1f2937; font-size: 15px;">‚ûï Th√™m S·ª± ki·ªán</h3>
                    
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label class="form-label" style="font-size: 13px;">Ti√™u ƒë·ªÅ</label>
                        <input type="text" id="eventTitle" class="auth-input" placeholder="VD: Thi cu·ªëi k·ª≥ To√°n" maxlength="50">
                    </div>

                    <div class="form-group" style="margin-bottom: 12px;">
                        <label class="form-label" style="font-size: 13px;">Ng√†y</label>
                        <input type="date" id="eventDate" class="auth-input">
                    </div>

                    <div class="form-group" style="margin-bottom: 12px;">
                        <label class="form-label" style="font-size: 13px;">Lo·∫°i</label>
                        <select id="eventType" class="auth-input">
                            <option value="exam">üéØ K·ª≥ thi</option>
                            <option value="deadline">‚è∞ H·∫°n ch√≥t</option>
                            <option value="activity">üéâ Ho·∫°t ƒë·ªông</option>
                        </select>
                    </div>

                    <button type="button" onclick="event.stopPropagation(); if(window.EventManager) window.EventManager.handleAddEvent()" class="btn-submit-login" style="width: 100%; margin-top: 16px;">
                        Th√™m S·ª± ki·ªán
                    </button>
                </div>

                <!-- RIGHT: Events List -->
                <div>
                    <h3 style="margin: 0 0 16px 0; color: #1f2937; font-size: 15px;">üìã Danh s√°ch</h3>
                    <div id="events-modal-list" style="display: flex; flex-direction: column; gap: 8px; max-height: 400px; overflow-y: auto;">
                    </div>
                </div>
            </div>

            <div style="padding: 16px 20px; border-top: 1px solid #e5e7eb; text-align: right;">
                <button type="button" onclick="event.stopPropagation(); if(window.EventManager) window.EventManager.closeModal()" style="padding: 8px 16px; background: #e5e7eb; border: none; border-radius: 6px; color: #374151; cursor: pointer; font-weight: 500;">
                    ƒê√≥ng
                </button>
            </div>
        </div>
    </div>

    <!-- Data Backup & Restore Modal -->
    <div id="dataSettingsModal" class="modal-overlay" style="display: none; z-index: 2050;">
        <div class="modal-box" style="max-width: 500px;">
            <button type="button" class="btn-close-modal" onclick="ModalManager.close('dataSettings')">‚úï</button>

            <div class="modal-header">
                <h2>üíæ Sao l∆∞u & Kh√¥i ph·ª•c D·ªØ li·ªáu</h2>
                <p>Qu·∫£n l√Ω d·ªØ li·ªáu h·ªçc t·∫≠p c·ªßa b·∫°n</p>
            </div>

            <div style="padding: 24px;">
                <!-- Export Data -->
                <div class="data-action-card">
                    <div class="data-action-icon" style="background: #dbeafe;">
                        <svg width="24" height="24" fill="none" stroke="#2563eb" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                        </svg>
                    </div>
                    <div class="data-action-content">
                        <h3>Sao l∆∞u d·ªØ li·ªáu</h3>
                        <p>Xu·∫•t to√†n b·ªô d·ªØ li·ªáu (GPA, s·ª± ki·ªán, th·ªùi kh√≥a bi·ªÉu) th√†nh file JSON</p>
                    </div>
                    <button type="button" class="btn-data-action" onclick="DataManager.exportData()" style="background: #2563eb;">
                        T·∫£i xu·ªëng
                    </button>
                </div>

                <!-- Import Data -->
                <div class="data-action-card">
                    <div class="data-action-icon" style="background: #dcfce7;">
                        <svg width="24" height="24" fill="none" stroke="#16a34a" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                    </div>
                    <div class="data-action-content">
                        <h3>Kh√¥i ph·ª•c d·ªØ li·ªáu</h3>
                        <p>Nh·∫≠p file sao l∆∞u ƒë·ªÉ kh√¥i ph·ª•c d·ªØ li·ªáu ƒë√£ l∆∞u</p>
                    </div>
                    <button type="button" class="btn-data-action restore" onclick="DataManager.triggerImport()">
                        T·∫£i l√™n
                    </button>
                </div>

                <!-- Clear Data (Optional) -->
                <div class="data-action-card" style="border-color: #fecaca;">
                    <div class="data-action-icon" style="background: #fee2e2;">
                        <svg width="24" height="24" fill="none" stroke="#dc2626" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </div>
                    <div class="data-action-content">
                        <h3>X√≥a to√†n b·ªô d·ªØ li·ªáu</h3>
                        <p style="color: #dc2626;">X√≥a vƒ©nh vi·ªÖn t·∫•t c·∫£ d·ªØ li·ªáu (kh√¥ng th·ªÉ ho√†n t√°c)</p>
                    </div>
                    <button type="button" class="btn-data-action" onclick="DataManager.clearAllData()" style="background: #dc2626;">
                        X√≥a t·∫•t c·∫£
                    </button>
                </div>
            </div>

            <div style="padding: 16px 20px; border-top: 1px solid #e5e7eb; text-align: right;">
                <button type="button" onclick="ModalManager.close('dataSettings')" style="padding: 8px 16px; background: #e5e7eb; border: none; border-radius: 6px; color: #374151; cursor: pointer; font-weight: 500;">
                    ƒê√≥ng
                </button>
            </div>
        </div>
    </div>

    <!-- Hidden File Input for Import (event listener attached in DataManager.init) -->
    <input type="file" id="backup-file-input" accept=".json" style="display: none;">

    <!-- Create Deck Modal -->
    <div id="createDeckModal" class="modal">
        <div class="create-modal-container">
            <!-- Header -->
            <div class="create-modal-header">
                <h2>‚ûï T·∫°o B·ªô Th·∫ª M·ªõi</h2>
                <p>Nh·∫≠p ti√™u ƒë·ªÅ v√† danh s√°ch c√°c th·∫ª h·ªçc</p>
            </div>

            <!-- Deck Settings -->
            <div class="deck-settings">
                <input type="text" id="deckTitle" class="input-deck" placeholder="Ti√™u ƒë·ªÅ h·ªçc ph·∫ßn (VD: Ti·∫øng Anh, To√°n...)" />
                <input type="text" id="deckIcon" class="input-deck" placeholder="Icon" value="üìö" maxlength="2" />
                <select id="deckColor" class="input-deck">
                    <option value="blue">Xanh d∆∞∆°ng</option>
                    <option value="purple">T√≠m</option>
                    <option value="green">Xanh l√°</option>
                    <option value="red">ƒê·ªè</option>
                    <option value="orange">Cam</option>
                    <option value="pink">H·ªìng</option>
                </select>
            </div>

            <!-- Card Input List -->
            <div id="card-input-list">
                <!-- Card rows will be added here dynamically -->
            </div>

            <!-- Footer -->
            <div class="create-modal-footer">
                <button type="button" class="btn-add-card-row" onclick="FlashcardManager.addCardRow()">
                    + Th√™m th·∫ª
                </button>
                <button type="button" class="btn-cancel-deck" onclick="FlashcardManager.closeCreateModal()">
                    H·ªßy
                </button>
                <button type="button" class="btn-save-deck" onclick="FlashcardManager.saveDeck()">
                    üíæ L∆∞u b·ªô th·∫ª
                </button>
            </div>
        </div>
    </div>

    <!-- Flashcard Study Modal -->
    <div id="studyModal" class="modal">
        <div class="study-modal-container">
            <!-- Header -->
            <div class="study-modal-header">
                <h2 id="studyModalTitle">Flashcard Deck</h2>
                <button type="button" class="btn-close-study" onclick="FlashcardManager.closeStudyModal()" title="ƒê√≥ng">√ó</button>
            </div>

            <!-- Progress -->
            <div class="study-progress">
                <p>Th·∫ª <span id="cardProgress">1 / 10</span></p>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="progressBarFill" style="width: 10%"></div>
                </div>
            </div>

            <!-- Card Container (3D Flip) -->
            <div class="card-container" onclick="FlashcardManager.flipCard()">
                <div class="card-inner">
                    <!-- Front Face (Question) -->
                    <div class="card-front">
                        <span class="card-label">C√¢u h·ªèi</span>
                        <p id="cardQuestion">Click ƒë·ªÉ l·∫≠t th·∫ª</p>
                    </div>
                    <!-- Back Face (Answer) -->
                    <div class="card-back">
                        <span class="card-label">C√¢u tr·∫£ l·ªùi</span>
                        <p id="cardAnswer">ƒê√°p √°n s·∫Ω hi·ªán ·ªü ƒë√¢y</p>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="study-controls">
                <button type="button" class="btn-nav-card" id="btnPrevCard" onclick="FlashcardManager.prevCard()">
                    ‚Üê Tr∆∞·ªõc
                </button>
                <button type="button" class="btn-flip-card" onclick="FlashcardManager.flipCard()">
                    üîÑ L·∫≠t th·∫ª
                </button>
                <button type="button" class="btn-nav-card" id="btnNextCard" onclick="FlashcardManager.nextCard()">
                    Sau ‚Üí
                </button>
            </div>
        </div>
    </div>

    <!-- PWA Service Worker Registration -->
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then((registration) => {
                        console.log('‚úÖ Service Worker registered successfully:', registration.scope);
                    })
                    .catch((error) => {
                        console.error('‚ùå Service Worker registration failed:', error);
                    });
            });
        }

        // PWA Install Prompt (Optional)
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            console.log('üí° PWA Install prompt available');
            
            // Optional: Show custom install button
            // You can add a button in your UI to trigger this:
            // deferredPrompt.prompt();
        });

        // Log when app is installed
        window.addEventListener('appinstalled', () => {
            console.log('üéâ PWA was installed successfully!');
            deferredPrompt = null;
        });
    </script>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-overlay" onclick="toggleMobileMenu()"></div>

</body>

</html>